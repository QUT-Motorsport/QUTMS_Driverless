<?xml version="1.0" ?>
<!-- =================================================================================== -->
<!-- |    This document was autogenerated by xacro from src/operations/vehicle_urdf/urdf/qev-3d.urdf.xacro | -->
<!-- |    EDITING THIS FILE BY HAND IS NOT RECOMMENDED                                 | -->
<!-- =================================================================================== -->
<robot name="qev-3d">
  <!-- material -->
  <material name="black">
    <color rgba="0 0 0 1"/>
  </material>
  <material name="orange">
    <color rgba="0.88 0.36 0.035 1"/>
  </material>
  <material name="invisible">
    <color rgba="0.0 0.0 0.0 0.0"/>
  </material>
  <material name="blue">
    <color rgba="0.0 0.0 1.0 1.0"/>
  </material>
  <material name="white">
    <color rgba="1.0 1.0 1.0 1.0"/>
  </material>

  <!-- Base Frame -->
  <link name="base_link"/>
  <!-- Chassis -->
  <joint name="chassis_joint" type="fixed">
    <parent link="base_link"/>
    <child link="chassis"/>
    <!-- Wheel height off ground -->
    <origin rpy="0 0 0" xyz="0 0 0.2"/>
    <axis xyz="1 0 0"/>
  </joint>
  <link name="chassis">
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <mesh filename="file:///home/peterliao/QUTMS/QUTMS_Driverless/install/vehicle_urdf/share/vehicle_urdf/meshes/lando.dae"/>
      </geometry>
    </visual>
    <origin rpy="0 0 0" xyz="0 0 0"/>
    <inertial>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <mass value="1.0"/>
      <inertia ixx="0.1" ixy="0.0" ixz="0.0" iyy="0.1" iyz="0.0" izz="0.1"/>
    </inertial>
  </link>
  <link name="virtual_rear_wheel">
    <visual>
      <origin rpy="1.5707963267948966 0 1.5707963267948966" xyz="0 0 0"/>
      <geometry>
        <cylinder length="0.01" radius="0.2"/>
      </geometry>
      <material name="invisible"/>
    </visual>
    <inertial>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <mass value="0.1"/>
      <inertia ixx="0.01" ixy="0.0" ixz="0.0" iyy="0.01" iyz="0.0" izz="0.01"/>
    </inertial>
  </link>
  <link name="virtual_front_wheel">
    <visual>
      <origin rpy="1.5707963267948966 0 1.5707963267948966" xyz="0 0 0"/>
      <geometry>
        <cylinder length="0.01" radius="0.2"/>
      </geometry>
      <material name="invisible"/>
    </visual>
    <inertial>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <mass value="0.1"/>
      <inertia ixx="0.01" ixy="0.0" ixz="0.0" iyy="0.01" iyz="0.0" izz="0.01"/>
    </inertial>
  </link>
  <joint name="virtual_rear_wheel_joint" type="continuous">
    <parent link="chassis"/>
    <child link="virtual_rear_wheel"/>
    <origin rpy="0 0 1.5707963267948966" xyz="-0.79 0 -0.1"/>
    <axis xyz="1 0 0"/>
    <limit effort="100.0" velocity="100.0"/>
    <dynamics damping="0.2"/>
  </joint>
  <joint name="virtual_front_wheel_joint" type="revolute">
    <parent link="chassis"/>
    <child link="virtual_front_wheel"/>
    <origin rpy="0 0 1.5707963267948966" xyz="0.79 0 -0.1"/>
    <axis xyz="0 0 1"/>
    <limit effort="100.0" lower="-0.4" upper="0.4" velocity="0.0"/>
    <dynamics damping="0.2"/>
  </joint>
  <link name="left_steering_hinge">
    <inertial>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <mass value="0.1"/>
      <inertia ixx="0.01" ixy="0.0" ixz="0.0" iyy="0.01" iyz="0.0" izz="0.01"/>
    </inertial>
  </link>
  <joint name="left_steering_hinge_joint" type="revolute">
    <origin rpy="0 0 0" xyz="0.79                      0.7000000000000001                      0"/>
    <parent link="chassis"/>
    <child link="left_steering_hinge"/>
    <axis xyz="0 0 1"/>
    <mimic joint="virtual_front_wheel_joint" multiplier="1" offset="0"/>
    <limit effort="10000000" lower="-0.28" upper="0.28" velocity="1000000"/>
  </joint>
  <joint name="front_left_wheel_joint" type="fixed">
    <origin rpy="0 0 0" xyz="0 0 0"/>
    <parent link="left_steering_hinge"/>
    <child link="left_front_wheel"/>
    <axis xyz="0 1 0"/>
    <limit effort="10000000" lower="0" upper="0" velocity="1000000"/>
  </joint>
  <link name="left_front_wheel">
    <visual>
      <origin rpy="1.5708 0 0" xyz="0 0 0"/>
      <geometry>
        <cylinder length="0.2" radius="0.2"/>
      </geometry>
      <material name="white"/>
    </visual>
    <inertial>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <mass value="0.1"/>
      <inertia ixx="0.01" ixy="0.0" ixz="0.0" iyy="0.01" iyz="0.0" izz="0.01"/>
    </inertial>
  </link>
  <link name="right_steering_hinge">
    <inertial>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <mass value="0.1"/>
      <inertia ixx="0.01" ixy="0.0" ixz="0.0" iyy="0.01" iyz="0.0" izz="0.01"/>
    </inertial>
  </link>
  <joint name="right_steering_hinge_joint" type="revolute">
    <origin rpy="0 0 0" xyz="0.79                      -0.7000000000000001                      0"/>
    <parent link="chassis"/>
    <child link="right_steering_hinge"/>
    <axis xyz="0 0 1"/>
    <mimic joint="virtual_front_wheel_joint" multiplier="1" offset="0"/>
    <limit effort="10000000" lower="-0.28" upper="0.28" velocity="1000000"/>
  </joint>
  <joint name="front_right_wheel_joint" type="fixed">
    <origin rpy="0 0 0" xyz="0 0 0"/>
    <parent link="right_steering_hinge"/>
    <child link="right_front_wheel"/>
    <axis xyz="0 1 0"/>
    <limit effort="10000000" lower="0" upper="0" velocity="1000000"/>
  </joint>
  <link name="right_front_wheel">
    <visual>
      <origin rpy="1.5708 0 0" xyz="0 0 0"/>
      <geometry>
        <cylinder length="0.2" radius="0.2"/>
      </geometry>
      <material name="white"/>
    </visual>
    <inertial>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <mass value="0.1"/>
      <inertia ixx="0.01" ixy="0.0" ixz="0.0" iyy="0.01" iyz="0.0" izz="0.01"/>
    </inertial>
  </link>
  <joint name="rear_left_wheel_joint" type="continuous">
    <origin rpy="0 0 0" xyz="-0.79                      0.7000000000000001                      0"/>
    <parent link="chassis"/>
    <child link="left_rear_wheel"/>
    <axis xyz="0 1 0"/>
    <!-- the real rear wheel joint should mimic the behaviour of the continuous virtual rear joint -->
    <mimic joint="virtual_rear_wheel_joint" multiplier="1" offset="0"/>
    <limit effort="10000000" lower="0" upper="0" velocity="1000000"/>
  </joint>
  <link name="left_rear_wheel">
    <visual>
      <origin rpy="1.5708 0 0" xyz="0 0 0"/>
      <geometry>
        <cylinder length="0.2" radius="0.2"/>
      </geometry>
      <material name="white"/>
    </visual>
    <inertial>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <mass value="0.1"/>
      <inertia ixx="0.01" ixy="0.0" ixz="0.0" iyy="0.01" iyz="0.0" izz="0.01"/>
    </inertial>
  </link>
  <joint name="rear_right_wheel_joint" type="continuous">
    <origin rpy="0 0 0" xyz="-0.79                      -0.7000000000000001                      0"/>
    <parent link="chassis"/>
    <child link="right_rear_wheel"/>
    <axis xyz="0 1 0"/>
    <!-- the real rear wheel joint should mimic the behaviour of the continuous virtual rear joint -->
    <mimic joint="virtual_rear_wheel_joint" multiplier="1" offset="0"/>
    <limit effort="10000000" lower="0" upper="0" velocity="1000000"/>
  </joint>
  <link name="right_rear_wheel">
    <visual>
      <origin rpy="1.5708 0 0" xyz="0 0 0"/>
      <geometry>
        <cylinder length="0.2" radius="0.2"/>
      </geometry>
      <material name="white"/>
    </visual>
    <inertial>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <mass value="0.1"/>
      <inertia ixx="0.01" ixy="0.0" ixz="0.0" iyy="0.01" iyz="0.0" izz="0.01"/>
    </inertial>
  </link>
  <!-- base frame to velodyne base -->
  <joint name="velodyne_base_mount_joint" type="fixed">
    <origin rpy="0 0 0" xyz="-0.3 0.0 0.85"/>
    <parent link="chassis"/>
    <child link="velodyne"/>
  </joint>
  <link name="velodyne">
    <visual>
      <origin rpy="0 0 0" xyz="0 0 0"/>
      <geometry>
        <cylinder length="0.0717" radius="0.0516"/>
      </geometry>
      <material name="black"/>
    </visual>
    <inertial>
      <origin xyz="0 0 0" rpy="0 0 0"/>
      <mass value="0.1"/>
      <inertia ixx="0.01" ixy="0.0" ixz="0.0" iyy="0.01" iyz="0.0" izz="0.01"/>
    </inertial>
  </link>
  <!-- default parameters -->
  <ros2_control name="QEV-3D" type="system">
    <hardware>
      <plugin>qev3d_ros2_control/Qev3dHardwareInterface</plugin>
      <param name="example_param_hw_start_duration_sec">0</param>
      <param name="example_param_hw_stop_duration_sec">3.0</param>
    </hardware>
    <joint name="virtual_front_wheel_joint">
      <command_interface name="position"/>
      <param name="min">-0.28</param>
      <param name="max">0.28</param>
      <state_interface name="position"/>
    </joint>
    <joint name="virtual_rear_wheel_joint">
      <command_interface name="velocity"/>
      <param name="min">-10</param>
      <param name="max">10</param>
      <state_interface name="velocity"/>
      <state_interface name="position"/>
    </joint>
  </ros2_control>
</robot>
